generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "sqlite"
    url      = env("DATABASE_URL")
}

model User {
    id         Int               @id @default(autoincrement())
    role       String
    first_name String
    last_name  String
    email      String            @unique
    evaluate   PCTO_Evaluation[]
    attends    PCTO_Attendance[]
}

model PCTO_Attendance {
    date       DateTime
    start_time DateTime?
    end_time   DateTime?
    presence   User      @relation(fields: [user_id], references: [id])
    user_id    Int
    works_on   PCTO      @relation(fields: [pcto_id], references: [id])
    pcto_id    Int

    @@id([pcto_id, user_id, date])
}

model PCTO_Evaluation {
    user      User   @relation(fields: [user_id], references: [id])
    user_id   Int
    pcto      PCTO   @relation(fields: [pcto_id], references: [id])
    pcto_id   Int
    evaluator String
    mark      Int

    @@id([user_id, pcto_id, evaluator])
}

model PCTO_Company {
    id      Int    @id @default(autoincrement())
    name    String
    address String @unique
    offers  PCTO?
}

model PCTO {
    id          Int               @id @default(autoincrement())
    start_date  DateTime?
    end_date    DateTime?
    title       String
    description String
    offered_by  PCTO_Company      @relation(fields: [company_id], references: [id])
    company_id  Int               @unique
    evaluate    PCTO_Evaluation[]
    attended_by PCTO_Attendance[]
}
